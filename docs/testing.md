---

# üß™ Testing Guide

**–ö–∞–∫ –ø–∏—Å–∞—Ç—å –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—É—á–∞—é—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–º—É –º—ã—à–ª–µ–Ω–∏—é.**  
–í BotKit —Ç–µ—Å—Ç ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∞, –∞ –º–∏–Ω–∏-–≥–ª–∞–≤–∞: –æ–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç FSM, –∫–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω —Å—Ü–µ–Ω–∞—Ä–∏–π, –∏ –∫–∞–∫ –µ–≥–æ –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å.

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±—É—á–∞—é—â–µ–≥–æ —Ç–µ—Å—Ç–∞

```python
def test_form_fsm_flow():
    fsm = FormFSM()
    assert fsm.handle(Event("input_name", "–ê–ª–∏—Å–∞")) == "–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email:"
    assert fsm.handle(Event("input_email", "alice@example.com")) == "–°–ø–∞—Å–∏–±–æ, –ê–ª–∏—Å–∞! –ú—ã –æ—Ç–ø—Ä–∞–≤–∏–º –ø–∏—Å—å–º–æ –Ω–∞ alice@example.com."
    assert fsm.state == "done"
```

### üß† –ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏

- `test_form_fsm_flow`: –Ω–∞–∑–≤–∞–Ω–∏–µ = –∑–∞–≥–æ–ª–æ–≤–æ–∫ walkthrough.
- `fsm.handle(...)`: –∏–º–∏—Ç–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥.
- `assert ...`: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∫ –ø–æ–≤–µ–¥–µ–Ω–∏–µ (–æ—Ç–≤–µ—Ç), —Ç–∞–∫ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É (—Å–æ—Å—Ç–æ—è–Ω–∏–µ).

---

## üß© –ü–∞—Ç—Ç–µ—Ä–Ω: —Ç–µ—Å—Ç –∫–∞–∫ –º–∏–Ω–∏-–≥–ª–∞–≤–∞

–ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç:
- –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (FSM, —Ö—Ä–∞–Ω–∏–ª–∏—â–µ),
- –≤—ã–∑—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ (input, transition),
- –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–æ—Ç–≤–µ—Ç, —Å–æ—Å—Ç–æ—è–Ω–∏–µ),
- –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω –≤ –∫–æ–¥–µ –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

---

## ‚úÖ –ü—Ä–∏–º–µ—Ä—ã: FSM-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ

```python
def test_set_and_get_state():
    fsm = FSM()
    fsm.set_state(42, "awaiting_input")
    assert fsm.get_state(42) == "awaiting_input"

def test_reset_state():
    fsm = FSM()
    fsm.set_state(42, "active")
    fsm.reset_state(42)
    assert fsm.get_state(42) is None

def test_has_state():
    fsm = FSM()
    fsm.set_state(1, "ready")
    assert fsm.has_state(1)
    fsm.reset_state(1)
    assert not fsm.has_state(1)
```

### üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–¥–µ–∏

- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ç–æ–º–∞—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π FSM-—Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—é —Å–æ—Å—Ç–æ—è–Ω–∏—è (`None`)
- Guard-–ª–æ–≥–∏–∫–∞ —á–µ—Ä–µ–∑ `has_state`

---

## üß¨ –ü—Ä–∏–º–µ—Ä—ã: FSM-—Å—Ü–µ–Ω–∞—Ä–∏–∏

```python
def test_scenario_path_a():
    fsm = ScenarioFSM()
    assert fsm.handle(Event("choose_path", "A")) == "–í—ã –≤—ã–±—Ä–∞–ª–∏ –ø—É—Ç—å A. –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º..."
    assert fsm.state == "path_a"
    assert fsm.handle(Event("continue", None)) == "–í—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏ –ø—É—Ç—å A!"

def test_scenario_path_b():
    fsm = ScenarioFSM()
    assert fsm.handle(Event("choose_path", "B")) == "–í—ã –≤—ã–±—Ä–∞–ª–∏ –ø—É—Ç—å B. –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥..."
    assert fsm.state == "path_b"
    assert fsm.handle(Event("continue", None)) == "–í—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏ –ø—É—Ç—å B!"
```

### üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–¥–µ–∏

- –í–µ—Ç–≤–ª–µ–Ω–∏–µ –ø–æ –≤—ã–±–æ—Ä—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
- –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å: –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–µ—Ä—ã, —É—Å–ª–æ–≤–∏—è, –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã

---

## üõ†Ô∏è –†–∞—Å—à–∏—Ä–µ–Ω–∏—è

- –ò—Å–ø–æ–ª—å–∑—É–π `pytest.mark.parametrize` –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
- –í–≤–µ–¥–∏ `FSMTestCase` —Å helper-–º–µ—Ç–æ–¥–∞–º–∏ (`assert_transition`, `assert_state`)
- –î–æ–±–∞–≤—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –ø—Ä—è–º–æ –≤ –∫–æ–¥ –∏–ª–∏ –≤ docstring —Ç–µ—Å—Ç–∞
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π —Ç–µ—Å—Ç—ã —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π FSM-–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –≥–ª–∞–≤—ã

- [FSM Patterns](fsm_patterns.md) ‚Äî —à–∞–±–ª–æ–Ω—ã —Ñ–æ—Ä–º, –æ–ø—Ä–æ—Å–æ–≤ –∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
---
